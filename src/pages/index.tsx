import { GetStaticProps } from "next";
import Head from "next/head";
import Button from "../components/Button";
import ButtonGroup from "../components/ButtonGroup";
import Header from "../components/Header";
import LinkWithIcon from "../components/LinkWithIcon";
import { getBlogPostsData } from "@/lib/posts";

interface HomepageProps {
  blogPosts: any;
}

export const getStaticProps: GetStaticProps = async () => {
  let blogPosts = getBlogPostsData();
  blogPosts = JSON.parse(JSON.stringify(blogPosts));

  return {
    props: {
      blogPosts,
    },
  };
};

export default function Home({ blogPosts }: HomepageProps) {
  return (
    <>
      <Head>
        <title>Hip Hop Season</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Header type="large" title="Welcome to Hip Hop Season">
        <p className="lead mt-4">
          Your home for <span className="underline">underground</span> Hip-Hop
          album reviews and blogs about all things related to Hip-Hop music and
          the culture.
        </p>
        <ButtonGroup>
          <Button type="primary" href="/reviews">
            Read the Reviews
          </Button>
          <LinkWithIcon href="/blog" className="color-white">
            Read the Blog
          </LinkWithIcon>
        </ButtonGroup>
      </Header>
      <section>
        <div className="container">
          <h2>Featured Reviews</h2>
          {blogPosts.map((blog: any) => {
            return <p key={blog.id}>{blog.title}</p>;
          })}
        </div>
      </section>
    </>
  );
}
